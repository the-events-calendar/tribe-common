tribe.settings=tribe.settings||{},tribe.settings.fields=tribe.settings.fields||{},tribe.settings.fields.image={},function(e,t){"use strict";var i=e(document);t.frame=!1,t.selectors={imageFieldContainer:".tribe-field-image, .tribe-field-image_id",addImgLink:".tec-admin__settings-image-field-btn-add",removeImgLink:".tec-admin__settings-image-field-btn-remove",imgContainer:".tec-admin__settings-image-field-image-container",imgIdInput:".tec-admin__settings-image-field-input"},t.hideElements=function(e){const i=""!==e.find(t.selectors.imgIdInput).val();e.find(t.selectors.addImgLink).toggleClass("hidden",i),e.find(t.selectors.removeImgLink).toggleClass("hidden",!i),e.find(t.selectors.imgContainer).toggleClass("hidden",!i)},t.onImageSelect=function(e){const i=t.frame.state().get("selection").first().toJSON(),n=e.find(t.selectors.imgContainer);n.find("img").length>0?n.find("img").attr("src",i.url):n.html('<img src="'+i.url+'" />'),e.is("[data-image-id=1]")?e.find(t.selectors.imgIdInput).val(i.id):e.find(t.selectors.imgIdInput).val(i.url),t.hideElements(e)},t.addImage=function(i){i.preventDefault();const n=e(i.target).closest(t.selectors.imageFieldContainer);t.frame||(t.frame=wp.media({title:n.data("select-image-text"),button:{text:n.data("use-image-text")},multiple:!1})),t.frame.open(),t.frame.off("select").on("select",(function(){t.onImageSelect(n)}))},t.removeImage=function(i){i.preventDefault();const n=e(i.target).closest(t.selectors.imageFieldContainer);n.find(t.selectors.imgIdInput).val(""),n.find(t.selectors.imgContainer).html(""),t.hideElements(n)},t.bindEvents=function(){i.on("click",t.selectors.addImgLink,t.addImage),i.on("click",t.selectors.removeImgLink,t.removeImage)},t.init=function(){e(t.selectors.imageFieldContainer).each((function(i,n){t.hideElements(e(n))})),t.bindEvents()},e(t.init)}(jQuery,tribe.settings.fields.image),window.tec=window.tec||{},window.tec.common=window.tec.common||{},window.tec.common.adminImageField={};